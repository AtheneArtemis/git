/* http://mths.be/placeholder v2.0.7 by @mathias */
(function(J, E, A) {
    var I = "placeholder"in E.createElement("input"), L = "placeholder"in E.createElement("textarea"), F = A.fn, H = A.valHooks, D, C;
    if (I && L) {
        C = F.placeholder = function() {
            return this
        }
        ;
        C.input = C.textarea = true
    } else {
        C = F.placeholder = function() {
            var M = this;
            M.filter((I ? "textarea" : ":input") + "[placeholder]").not(".placeholder").bind({
                "focus.placeholder": G,
                "blur.placeholder": B
            }).data("placeholder-enabled", true).trigger("blur.placeholder");
            return M
        }
        ;
        C.input = I;
        C.textarea = L;
        D = {
            get: function(N) {
                var M = A(N);
                return M.data("placeholder-enabled") && M.hasClass("placeholder") ? "" : N.value
            },
            set: function(O, M) {
                var N = A(O);
                if (!N.data("placeholder-enabled")) {
                    return O.value = M
                }
                if (M == "") {
                    O.value = M;
                    if (O != E.activeElement) {
                        B.call(O)
                    }
                } else {
                    if (N.hasClass("placeholder")) {
                        G.call(O, true, M) || (O.value = M)
                    } else {
                        O.value = M
                    }
                }
                return N
            }
        };
        I || (H.input = D);
        L || (H.textarea = D);
        A(function() {
            A(E).delegate("form", "submit.placeholder", function() {
                var M = A(".placeholder", this).each(G);
                setTimeout(function() {
                    M.each(B)
                }, 10)
            })
        });
        A(J).bind("beforeunload.placeholder", function() {
            A(".placeholder").each(function() {
                this.value = ""
            })
        })
    }
    function K(O) {
        var N = {}
          , M = /^jQuery\d+$/;
        A.each(O.attributes, function(P, Q) {
            if (Q.specified && !M.test(Q.name)) {
                N[Q.name] = Q.value
            }
        });
        return N
    }
    function G(P, M) {
        var O = this
          , N = A(O);
        if (O.value == N.attr("placeholder") && N.hasClass("placeholder")) {
            if (N.data("placeholder-password")) {
                N = N.hide().next().show().attr("id", N.removeAttr("id").data("placeholder-id"));
                if (P === true) {
                    return N[0].value = M
                }
                N.focus()
            } else {
                O.value = "";
                N.removeClass("placeholder");
                O == E.activeElement && O.select()
            }
        }
    }
    function B() {
        var O, P = this, N = A(P), Q = N, R = this.id;
        if (P.value == "") {
            if (P.type == "password") {
                if (!N.data("placeholder-textinput")) {
                    try {
                        O = N.clone().attr({
                            type: "text"
                        })
                    } catch (M) {
                        O = A("<input>").attr(A.extend(K(this), {
                            type: "text"
                        }))
                    }
                    O.removeAttr("name").data({
                        "placeholder-password": true,
                        "placeholder-id": R
                    }).bind("focus.placeholder", G);
                    N.data({
                        "placeholder-textinput": O,
                        "placeholder-id": R
                    }).before(O)
                }
                N = N.removeAttr("id").hide().prev().attr("id", R).show()
            }
            N.addClass("placeholder");
            N[0].value = N.attr("placeholder")
        } else {
            N.removeClass("placeholder")
        }
    }
}(this, document, jQuery));
